{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/melody/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/melody/source/js/hexo-theme-melody.js","path":"js/hexo-theme-melody.js","modified":0,"renderable":1},{"_id":"themes/melody/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/melody/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/melody/source/img/algolia.svg","path":"img/algolia.svg","modified":0,"renderable":1},{"_id":"themes/melody/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"themes/melody/source/js/copy.js","path":"js/copy.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/fancybox.js","path":"js/fancybox.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/fireworks.js","path":"js/fireworks.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/head.js","path":"js/head.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/scroll.js","path":"js/scroll.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/sidebar.js","path":"js/sidebar.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/transition.js","path":"js/transition.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/anime.min.js","path":"js/third-party/anime.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/jquery.fancybox.min.js","path":"js/third-party/jquery.fancybox.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/velocity.ui.min.js","path":"js/third-party/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/velocity.min.js","path":"js/third-party/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/jquery.min.js","path":"js/third-party/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/head.min.js","path":"js/third-party/reveal/head.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/markdown.min.js","path":"js/third-party/reveal/markdown.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/marked.min.js","path":"js/third-party/reveal/marked.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/math.min.js","path":"js/third-party/reveal/math.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/notes.min.js","path":"js/third-party/reveal/notes.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/zoom.min.js","path":"js/third-party/reveal/zoom.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/reveal.min.js","path":"js/third-party/reveal/reveal.min.js","modified":0,"renderable":1},{"_id":"themes/melody/source/js/third-party/reveal/highlight.min.js","path":"js/third-party/reveal/highlight.min.js","modified":0,"renderable":1}],"Cache":[{"_id":"themes/melody/.eslintignore","hash":"55f36fe3be2270ae2746eddbb2982e4e1472bc31","modified":1529027005300},{"_id":"themes/melody/.eslintrc","hash":"cfcd1b454efdd6cc1a0d43be7bc79027b84531f7","modified":1529027005300},{"_id":"themes/melody/.gitignore","hash":"7ed73f0edfb682b12a42070fd2730d5d712ec2fa","modified":1529027005300},{"_id":"themes/melody/.travis.demo.yml","hash":"4482d40a58a035ef96888dfc4ed96c861b8f78a5","modified":1529027005300},{"_id":"themes/melody/README.md","hash":"ec94448d7b2b6de7c2ef1ea5275311c729a19faa","modified":1529027005301},{"_id":"themes/melody/LICENSE","hash":"c372b56b7553dafd2d8a8abf12d0dd71b4e2bfc0","modified":1529027005301},{"_id":"themes/melody/_config.yml","hash":"ab1fe10b3d3dafa20c012515eaf4d713beb0f343","modified":1529027005302},{"_id":"themes/melody/package.json","hash":"ea52267a29825fb73897c6ef8bb9f9f33b2c3f7d","modified":1529027005315},{"_id":"themes/melody/stylus_format.json","hash":"2fbe63b06901d202773457d7ce658ab6aa85d02b","modified":1529027005341},{"_id":"themes/melody/scripts/hexo-plugins.txt","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1529027005315},{"_id":"source/_data/melody.yml","hash":"ce43d9a36c47ad752c29d37de4cc546fc9213469","modified":1529058141660},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1529057951785},{"_id":"source/_posts/laravel-s-499-错误","hash":"1801dc233cca7db7bd30833cccbf999e9e3538d1","modified":1534471108495},{"_id":"themes/melody/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1529027005294},{"_id":"source/_posts/laravel-s-499-错误解决.md","hash":"4d80ca2cbdc758b7f0e852bc5db0f8725bf17d69","modified":1534471187017},{"_id":"themes/melody/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1529026998338},{"_id":"themes/melody/.git/config","hash":"dbc9583c30072395a2108cf3384f87973212d53c","modified":1529027005295},{"_id":"themes/melody/.git/index","hash":"5f4c3ad4549864569c672388996f8f60ff7539c2","modified":1529028717263},{"_id":"themes/melody/.git/packed-refs","hash":"25f6074e6d47e2a323d2d1ef51d236478efcb582","modified":1529027005291},{"_id":"themes/melody/.github/ISSUE_TEMPLATE.md","hash":"c5f14119189d9930fd7afd6e8822592fcd314ecf","modified":1529027005300},{"_id":"themes/melody/.vscode/launch.json","hash":"3098e8e395a33fa130747d2fd104a21278f266a6","modified":1529027005301},{"_id":"themes/melody/.vscode/settings.json","hash":"2e4acade0812cbeaf1363971c696a1d52d4f05ba","modified":1529027005301},{"_id":"themes/melody/languages/default.yml","hash":"5859596db5ed9b2e7f86874c4df71409323ef9b8","modified":1529027005302},{"_id":"themes/melody/languages/en.yml","hash":"5859596db5ed9b2e7f86874c4df71409323ef9b8","modified":1529027005302},{"_id":"themes/melody/languages/zh-Hans.yml","hash":"a0b752f18dd31e56c3e4ae6860f87f92c2e1a95c","modified":1529027005302},{"_id":"themes/melody/layout/archive.pug","hash":"2133e9f369dac19b9f843fc956521f864ace7567","modified":1529027005302},{"_id":"themes/melody/layout/category.pug","hash":"ea5f82d69e586f293f428f3b237c17bf873b4f03","modified":1529027005303},{"_id":"themes/melody/layout/gallery.pug","hash":"c083a7bbf5f46305daed74632aef3403b7d94dc7","modified":1529027005303},{"_id":"themes/melody/layout/index.pug","hash":"5e969c09fa5902829ad0b14c0af8d432bd4c7078","modified":1529027005312},{"_id":"themes/melody/layout/page.pug","hash":"6bb4336f74784679ac3f8691b0cce427f2282e02","modified":1529027005313},{"_id":"themes/melody/layout/post.pug","hash":"84268639485e56638f07805f65b965caf69c201a","modified":1529027005313},{"_id":"themes/melody/layout/slides.pug","hash":"1e84a92d5b854dd233e0b511d59c1cd7c8d647a1","modified":1529027005314},{"_id":"themes/melody/layout/tag.pug","hash":"ca333911bc97bc9d3eba6e1bc05e96b209ecedfb","modified":1529027005314},{"_id":"themes/melody/scripts/gallery-tag.js","hash":"74e2e95f8daec619578f4b7dd1ed77cd5907f37e","modified":1529027005315},{"_id":"themes/melody/scripts/replace-config.js","hash":"3439d79603f66830925a19e136e9ead54a85ed8b","modified":1529027005315},{"_id":"themes/melody/source/favicon.ico","hash":"e33c804e570eb238fe095ed28346dd1b3a0666ae","modified":1529027005323},{"_id":"themes/melody/source/js/hexo-theme-melody.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1529027005326},{"_id":"themes/melody/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1529026998338},{"_id":"themes/melody/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1529026998340},{"_id":"themes/melody/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1529026998341},{"_id":"themes/melody/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1529026998342},{"_id":"themes/melody/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1529026998342},{"_id":"themes/melody/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1529026998339},{"_id":"themes/melody/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1529026998339},{"_id":"themes/melody/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1529026998340},{"_id":"themes/melody/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1529026998341},{"_id":"themes/melody/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1529026998342},{"_id":"themes/melody/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1529026998337},{"_id":"themes/melody/.git/logs/HEAD","hash":"d91ecef2a8f51f80e82613d90cb77e5e6bd2c5b0","modified":1529027005294},{"_id":"themes/melody/layout/includes/additional-js.pug","hash":"fd53e30c9c5bc497538753c8c6a2bc3294f03494","modified":1529027005303},{"_id":"themes/melody/layout/includes/config.pug","hash":"f11a6427cf7c06b357b336ba6ba60149c324c750","modified":1529027005305},{"_id":"themes/melody/layout/includes/footer.pug","hash":"0e9f1778f021f1c205f0b1be83014fba576797af","modified":1529027005305},{"_id":"themes/melody/layout/includes/head.pug","hash":"eb40f41ad1b1133c4a210009af7e9cc4b8b8eabd","modified":1529027005306},{"_id":"themes/melody/layout/includes/header.pug","hash":"7efbfdb22ed0a76d707bbe83cca95a89b548c6ee","modified":1529027005306},{"_id":"themes/melody/layout/includes/layout.pug","hash":"56a6eca22e050faf4ace834294f9c07bfb07291a","modified":1529027005306},{"_id":"themes/melody/layout/includes/nav.pug","hash":"d9d341d690a03680ef66c4d84715cab1f5a39372","modified":1529027005307},{"_id":"themes/melody/layout/includes/pagination.pug","hash":"556d055e2f0c30d41ec16ef7943bd3227afcdfd1","modified":1529027005308},{"_id":"themes/melody/layout/includes/recent-posts.pug","hash":"aefcb3462d1b9ed2fb8d16414a4f580fc4e7a4e7","modified":1529027005308},{"_id":"themes/melody/layout/includes/sidebar.pug","hash":"eec90041437ce81f0171fd0b29cdaeb90d43855f","modified":1529027005311},{"_id":"themes/melody/source/css/index.styl","hash":"111ec52cde3e5fae92cf61dc2a1bd8726b3aa8f9","modified":1529027005322},{"_id":"themes/melody/source/css/var.styl","hash":"bbb372afd00ecdeee767266692e9f0792ac6be2f","modified":1529027005322},{"_id":"themes/melody/source/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1529027005323},{"_id":"themes/melody/source/img/avatar.png","hash":"a44601fac9a81dd7e392d05ea5ddc65c96b051df","modified":1529027005324},{"_id":"themes/melody/source/js/copy.js","hash":"cfae08721664d19cf0059172b994c0a2e253d334","modified":1529027005324},{"_id":"themes/melody/source/js/fancybox.js","hash":"0c2c506559129a5108893cf054b9aa46fe878fc3","modified":1529027005325},{"_id":"themes/melody/source/js/fireworks.js","hash":"5e3da1344966d5d6328a410cad69e92297699f3b","modified":1529027005325},{"_id":"themes/melody/source/js/head.js","hash":"212a32f824cadea0167bf4204c9714df5b7e5f5d","modified":1529027005325},{"_id":"themes/melody/source/js/scroll.js","hash":"73d57e7cf9921ba5724ad48b8d0e8b25dbce059f","modified":1529027005326},{"_id":"themes/melody/source/js/sidebar.js","hash":"a42109c5a69dedc87e1aaf8cb2383fd43069677e","modified":1529027005327},{"_id":"themes/melody/source/js/utils.js","hash":"f514662ad80803e1bb5f6bc653c4b9ad06ea4932","modified":1529027005340},{"_id":"themes/melody/source/js/transition.js","hash":"998c3bb6523a248d4dd4d747510c03a914a6378d","modified":1529027005340},{"_id":"themes/melody/layout/includes/gallery/script.pug","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1529027005306},{"_id":"themes/melody/.git/objects/pack/pack-a77eb8fbfb7c42837354af22b68758a931e14fcb.idx","hash":"290c595fbc18aef016aea768315ac677db580b21","modified":1529027005275},{"_id":"themes/melody/.git/refs/heads/master","hash":"70ab440e0536cfadfd8052911c92b9e819feb4dd","modified":1529027005294},{"_id":"themes/melody/layout/includes/comments/disqus.pug","hash":"989de5ed05fb462e5a46601eb41ab3963b4d4e9d","modified":1529027005303},{"_id":"themes/melody/layout/includes/comments/gitalk.pug","hash":"86bdbc4a52024c3573bea27817394dd118b70a26","modified":1529027005303},{"_id":"themes/melody/layout/includes/comments/gitment.pug","hash":"4a9e172c2b7a9f6f1f8c313d0d45266de828f209","modified":1529027005304},{"_id":"themes/melody/layout/includes/comments/index.pug","hash":"6c16214e5945142e5f3b58e7694397e26f28849d","modified":1529027005304},{"_id":"themes/melody/layout/includes/comments/laibili.pug","hash":"97de1d1fb0459e7a2394ac2f5e449adf9b6986cb","modified":1529027005304},{"_id":"themes/melody/layout/includes/comments/valine.pug","hash":"e87eca6aed5a7e234a8acaa93e08ed674cb1531e","modified":1529027005304},{"_id":"themes/melody/layout/includes/count/busuanzi.pug","hash":"43fd52287adef41dc083738e25f24390d72b572c","modified":1529027005305},{"_id":"themes/melody/layout/includes/gallery/layout.pug","hash":"8ff96c4f9afb416c5fc586c9585ae51cb6129529","modified":1529027005305},{"_id":"themes/melody/layout/includes/mixins/article-sort.pug","hash":"da7572fcc4aac6b63a651a3320e5d853ea07b347","modified":1529027005307},{"_id":"themes/melody/layout/includes/mixins/slide.pug","hash":"91975f700b20131ab4df4d2ea3e1acc8bf2d3eef","modified":1529027005307},{"_id":"themes/melody/layout/includes/search/algolia.pug","hash":"44d5a061df53a276d22b3855652645d90117d0b6","modified":1529027005309},{"_id":"themes/melody/layout/includes/search/index.pug","hash":"b01828b37d789797aeb5433f1705cff3c540a4d5","modified":1529027005309},{"_id":"themes/melody/layout/includes/search/local-search.pug","hash":"85347ad18da0a81bfa7b0c0a8643886f4c0cacc1","modified":1529027005309},{"_id":"themes/melody/layout/includes/share/add-this.pug","hash":"17a11c1c36c9078639c2a82628ce5fc6584daffb","modified":1529027005310},{"_id":"themes/melody/layout/includes/share/index.pug","hash":"65ea837388ddf806f89c3b9082ceb31776dc6be5","modified":1529027005310},{"_id":"themes/melody/layout/includes/share/share-js.pug","hash":"f428b3bbc7a22d176098826c5e0aadf32b47f865","modified":1529027005310},{"_id":"themes/melody/layout/includes/slide/script.pug","hash":"c35c2af397f41bb858070032c702e8503371fd07","modified":1529027005312},{"_id":"themes/melody/layout/includes/slide/layout.pug","hash":"6b24f298d442e409c1149e4c1df38efce0453883","modified":1529027005311},{"_id":"themes/melody/layout/includes/third-party/mathjax.pug","hash":"035656871566bdcb8c45d3a0fe0b0835c524eb11","modified":1529027005312},{"_id":"themes/melody/source/css/_global/index.styl","hash":"c3418bbacedfe134f64f2ad5e7ae7a9b7292f84f","modified":1529027005316},{"_id":"themes/melody/source/css/_highlight/diff.styl","hash":"b0079f6da761935b720d70dafd826ef62fad86d2","modified":1529027005316},{"_id":"themes/melody/source/css/_highlight/theme.styl","hash":"7d85860927afa1d93b4a39febff3d95a73de4c36","modified":1529027005317},{"_id":"themes/melody/source/css/_layout/comments.styl","hash":"e58602aad6792f1a5dbda0677ecb04d21ac10e97","modified":1529027005317},{"_id":"themes/melody/source/css/_layout/footer.styl","hash":"a72a6bb4477c18a14a2b779db183df22b4cba272","modified":1529027005318},{"_id":"themes/melody/source/css/_highlight/highlight.styl","hash":"1a97dcb1b85d7a36dd0367125db03b72bed0a0a6","modified":1529027005317},{"_id":"themes/melody/source/css/_layout/head.styl","hash":"049c5eddcb2ee80fdce91992087df2e7b80afd9c","modified":1529027005318},{"_id":"themes/melody/source/css/_layout/pagination.styl","hash":"a3f52d1f7ff1eaead8df016b2a4def6f7b4e9559","modified":1529027005319},{"_id":"themes/melody/source/css/_layout/page.styl","hash":"79d551beaea2458abcedbf585618b9fa8d3d22e5","modified":1529027005318},{"_id":"themes/melody/source/css/_layout/post.styl","hash":"9bdd9b5c957c3c5494cdf0b40700fd1f08162ac5","modified":1529027005319},{"_id":"themes/melody/source/css/_layout/sidebar.styl","hash":"e8315401a6c791d00617c031be01f45df70fe7fd","modified":1529027005320},{"_id":"themes/melody/source/css/_search/algolia.styl","hash":"8129d254a30e3a66cdb7eb77253036221928f47b","modified":1529027005320},{"_id":"themes/melody/source/css/_search/index.styl","hash":"031b1577e8a07f18c047b27e6b4723b14ae018b0","modified":1529027005320},{"_id":"themes/melody/source/css/_search/local-search.styl","hash":"e1b082bfb4e04ffe42efa149b02fdb66aad682a7","modified":1529027005321},{"_id":"themes/melody/source/css/_third-party/normalize.min.css","hash":"e12eef6d6811c132f4f2fcf6c936be384191bcaf","modified":1529027005322},{"_id":"themes/melody/source/css/_third-party/jquery.fancybox.min.css","hash":"f9c94ec04062a1bfe1ef894c49e6ec33fa121778","modified":1529027005321},{"_id":"themes/melody/source/js/search/algolia.js","hash":"884ecf62fe22cb869bbb7968ee770c1a699f591d","modified":1529027005326},{"_id":"themes/melody/source/js/search/local-search.js","hash":"951bbc3fe459a448d5a3e555ad84225272d91071","modified":1529027005327},{"_id":"themes/melody/source/js/third-party/anime.min.js","hash":"3c46c9597c721644a515c1c54ab13f46406657f7","modified":1529027005327},{"_id":"themes/melody/source/js/third-party/jquery.fancybox.min.js","hash":"2ec3ef6c31b971ba5e58eb4a0c5ede902bbdd4af","modified":1529027005328},{"_id":"themes/melody/source/js/third-party/velocity.ui.min.js","hash":"d8124c091d19fa4072616a44a8897fabc6599fce","modified":1529027005340},{"_id":"themes/melody/source/js/third-party/velocity.min.js","hash":"69c85b9d6a931a7d3a5b0657e60112c31fb3b286","modified":1529027005339},{"_id":"themes/melody/source/js/third-party/jquery.min.js","hash":"1055018c28ab41087ef9ccefe411606893dabea2","modified":1529027005330},{"_id":"themes/melody/.git/logs/refs/heads/master","hash":"d91ecef2a8f51f80e82613d90cb77e5e6bd2c5b0","modified":1529027005295},{"_id":"themes/melody/.git/refs/remotes/origin/HEAD","hash":"2c142208129b78a4616cbb6798f96f4fb3580296","modified":1529027005293},{"_id":"themes/melody/source/js/third-party/reveal/head.min.js","hash":"8c9495c76d5aa00d3dfb88653c362fba9f10cbb2","modified":1529027005330},{"_id":"themes/melody/source/js/third-party/reveal/markdown.min.js","hash":"859d70cd7c459819b90fe27afb940d16ecff6614","modified":1529027005336},{"_id":"themes/melody/source/js/third-party/reveal/marked.min.js","hash":"37f3186f93ec854f56bf745a5988a89225e8da6c","modified":1529027005337},{"_id":"themes/melody/source/js/third-party/reveal/math.min.js","hash":"779c98dbd83a528f27ea4b9f2d420c957c0939ba","modified":1529027005337},{"_id":"themes/melody/source/js/third-party/reveal/notes.min.js","hash":"4bb2925b111467791fdef3c4e4b41993d59ce90f","modified":1529027005337},{"_id":"themes/melody/source/js/third-party/reveal/zoom.min.js","hash":"aca47bf417d451c4d364c6eb287a230e4b462b17","modified":1529027005338},{"_id":"themes/melody/source/js/third-party/reveal/reveal.min.js","hash":"d8377a86451712488dea87caf5acbf8e97aa991f","modified":1529027005338},{"_id":"themes/melody/.git/logs/refs/remotes/origin/HEAD","hash":"dc3672a262c151f25000af1833a8e7a4489db750","modified":1529027005293},{"_id":"themes/melody/.git/objects/pack/pack-a77eb8fbfb7c42837354af22b68758a931e14fcb.pack","hash":"4f5052106b63b96f90ef35c1ca6fee3f82b611ad","modified":1529027005274},{"_id":"themes/melody/source/js/third-party/reveal/highlight.min.js","hash":"10dd530e712a67f25cf27845213c0f28d2fe9e4d","modified":1529027005336}],"Category":[],"Data":[{"_id":"melody","data":{"language":"zh-Hans","menu":{"Home":"/","Archives":"/archives"},"favicon":"/favicon.ico","pwa":{"enable":false,"manifest":null},"highlight_theme":"light","social":{"github":"https://github.com/pauldo"},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"}},"mathjax":{"enable":false,"cdn":"https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"fireworks":true,"baidu_analytics":null,"google_analytics":null,"stylesheets":["/css/index.css"],"scripts":["/js/utils.js","/js/fancybox.js","/js/sidebar.js","/js/copy.js","/js/fireworks.js","/js/transition.js","/js/scroll.js","/js/head.js"],"cdn":{"css":{"fontawesome":"https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"},"js":{"anime":"/js/third-party/anime.min.js","jquery":"/js/third-party/jquery.min.js","fancybox":"/js/third-party/jquery.fancybox.min.js","velocity":"/js/third-party/velocity.min.js","velocity-ui":"/js/third-party/velocity.ui.min.js"}},"avatar":null,"top_img":"img/home-bg.jpg","post_meta":{"date_type":"created","categories":true,"tags":true},"wordcount":{"enable":false},"toc":{"enable":true},"post_copyright":{"enable":true,"license":"CC BY-NC-SA 4.0","license_url":"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"slide":{"separator":"---","separator_vertical":"--","charset":"utf-8","theme":"black","mouseWheel":true,"transition":"slide","transitionSpeed":"default","parallaxBackgroundImage":"","parallaxBackgroundSize":"","parallaxBackgroundHorizontal":null,"parallaxBackgroundVertical":null},"addThis":{"enable":false},"disqus":{"enable":false},"since":2018,"ICP":{"enable":false},"busuanzi":{"enable":true,"site_uv":true,"site_uv_header":"<i class=\"fa fa-user\"></i>","site_uv_footer":null,"site_pv":true,"site_pv_header":"<i class=\"fa fa-eye\"></i>","site_pv_footer":null,"page_pv":true,"page_pv_header":"<i class=\"fa fa-file-o\"></i>","page_pv_footer":null}}}],"Page":[],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2018-06-15T10:19:11.785Z","updated":"2018-06-15T10:19:11.785Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkxchqeu0000ndzxyanckq17","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{"melody":{"language":"zh-Hans","menu":{"Home":"/","Archives":"/archives"},"favicon":"/favicon.ico","pwa":{"enable":false,"manifest":null},"highlight_theme":"light","social":{"github":"https://github.com/pauldo"},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"}},"mathjax":{"enable":false,"cdn":"https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"fireworks":true,"baidu_analytics":null,"google_analytics":null,"stylesheets":["/css/index.css"],"scripts":["/js/utils.js","/js/fancybox.js","/js/sidebar.js","/js/copy.js","/js/fireworks.js","/js/transition.js","/js/scroll.js","/js/head.js"],"cdn":{"css":{"fontawesome":"https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"},"js":{"anime":"/js/third-party/anime.min.js","jquery":"/js/third-party/jquery.min.js","fancybox":"/js/third-party/jquery.fancybox.min.js","velocity":"/js/third-party/velocity.min.js","velocity-ui":"/js/third-party/velocity.ui.min.js"}},"avatar":null,"top_img":"img/home-bg.jpg","post_meta":{"date_type":"created","categories":true,"tags":true},"wordcount":{"enable":false},"toc":{"enable":true},"post_copyright":{"enable":true,"license":"CC BY-NC-SA 4.0","license_url":"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"slide":{"separator":"---","separator_vertical":"--","charset":"utf-8","theme":"black","mouseWheel":true,"transition":"slide","transitionSpeed":"default","parallaxBackgroundImage":"","parallaxBackgroundSize":"","parallaxBackgroundHorizontal":null,"parallaxBackgroundVertical":null},"addThis":{"enable":false},"disqus":{"enable":false},"since":2018,"ICP":{"enable":false},"busuanzi":{"enable":true,"site_uv":true,"site_uv_header":"<i class=\"fa fa-user\"></i>","site_uv_footer":null,"site_pv":true,"site_pv_header":"<i class=\"fa fa-eye\"></i>","site_pv_footer":null,"page_pv":true,"page_pv_header":"<i class=\"fa fa-file-o\"></i>","page_pv_footer":null}}}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"laravel-s 499 错误解决","date":"2018-08-17T01:57:04.000Z","_content":"> 线上 lumen 服务优化为 swoole 后, 性能得到显著提升, 但伴随而来一些奇怪的问题, 需要排查\n\n#### 问题:\n\n线上服务偶现 499 错误, 且问题期间伴随着少许 redis 或数据库连接超时\n\n#### 分析现场:\n\n- 通过 zabbix 观察报错期间, cpu load 和内存使用未发现异常, 且 cpu 使用率和内存使用率偏低\n- 线上日志, 通过全链路 TraceID 分析, 在 499 发生的期间, nginx 有 access 日志, 但业务代码并未发现任何日志\n\n#### 分析问题:\n\n[laravel-s](https://github.com/hhxsv5/laravel-s) 默认设置的默认工作进程数(worker_num)为 cpu 核心数 * 2. 从官方文档查询 [worker_num 的定义](https://wiki.swoole.com/wiki/page/275.html): \"业务代码为同步阻塞，需要根据请求响应时间和系统负载来调整; 最大不得超过SWOOLE_CPU_NUM * 1000\". 推断是因为流量较高的情况下, 如果出现网络闪断/DB或redis超时, 正在处理的请求会产生积压, 没有足够的 worker 进程处理, 请求就会积压在 nginx, 直到网络调用方\"不耐烦\"主动断开连接, nginx 出现 499. 此时内存和 cpu 没有充分利用, 造成资源浪费\n\n#### 通过压测验证:\n\n测试环境: 4c 8g\n\n测试准备: 将接口 sleep 若干秒时间, 开始压测\n\n压测工具: [wrk](https://github.com/wg/wrk)\n\n###### 先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题\n\n使用压测工具10个线程并发, 持续5秒请求\n\n```shell\n$ wrk -s post.lua -t 10 -c 10 -d 5s --latency http://service.test/credit/user_credit\nRunning 5s test @ http://service.test/credit/user_credit\n  10 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     0.00us    0.00us   0.00us    -nan%\n    Req/Sec     0.00      0.00     0.00    100.00%\n  Latency Distribution\n     50%    0.00us\n     75%    0.00us\n     90%    0.00us\n     99%    0.00us\n  2 requests in 5.01s, 1.70KB read\n  Socket errors: connect 0, read 0, write 0, timeout 2\nRequests/sec:      0.40\nTransfer/sec:     346.72B\n```\n\nnginx访问请求日志可以看出, 访问成功的只有2条, 剩下的均为499主动断开连接\n\n```\n112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] \"POST /credit/user_credit HTTP/1.1\" 3.003 3.003 200 682 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] \"POST /credit/user_credit HTTP/1.1\" 3.004 3.004 200 682 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.007 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.008 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.009 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.010 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n```\n\nphp请求日志中, 接收到4条请求日志:\n\n```\n[2018-08-16 19:32:07.232160] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:07.233247] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.233018] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - <===/credit/user_credit cost: 3001 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.233913] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.234961] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - <===/credit/user_credit cost: 3002 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.235735] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:13.236693] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - <===/credit/user_credit cost: 3003 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:13.237531] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - <===/credit/user_credit cost: 3002 ms {\"qd_type\":\"sys\"}\n```\n\n调整压测持续时间为1分钟, 观察系统负载, 发现系统毫无压力, 与线上现象匹配\n\n###### worker_num 调整到 100\n\n再次压测发现, 并发量已经上来了, 就不放示例了, 大家可以自行测试一下\n\n#### 总结\n\n在测试环境进行压测不仅要测试接口正常的性能, 还应该模拟响应耗时比长的场景对服务的影响, 然后想办法最大化利用系统资源提高并发量\n","source":"_posts/laravel-s-499-错误解决.md","raw":"---\ntitle: laravel-s 499 错误解决\ndate: 2018-08-17 09:57:04\ntags:\n---\n> 线上 lumen 服务优化为 swoole 后, 性能得到显著提升, 但伴随而来一些奇怪的问题, 需要排查\n\n#### 问题:\n\n线上服务偶现 499 错误, 且问题期间伴随着少许 redis 或数据库连接超时\n\n#### 分析现场:\n\n- 通过 zabbix 观察报错期间, cpu load 和内存使用未发现异常, 且 cpu 使用率和内存使用率偏低\n- 线上日志, 通过全链路 TraceID 分析, 在 499 发生的期间, nginx 有 access 日志, 但业务代码并未发现任何日志\n\n#### 分析问题:\n\n[laravel-s](https://github.com/hhxsv5/laravel-s) 默认设置的默认工作进程数(worker_num)为 cpu 核心数 * 2. 从官方文档查询 [worker_num 的定义](https://wiki.swoole.com/wiki/page/275.html): \"业务代码为同步阻塞，需要根据请求响应时间和系统负载来调整; 最大不得超过SWOOLE_CPU_NUM * 1000\". 推断是因为流量较高的情况下, 如果出现网络闪断/DB或redis超时, 正在处理的请求会产生积压, 没有足够的 worker 进程处理, 请求就会积压在 nginx, 直到网络调用方\"不耐烦\"主动断开连接, nginx 出现 499. 此时内存和 cpu 没有充分利用, 造成资源浪费\n\n#### 通过压测验证:\n\n测试环境: 4c 8g\n\n测试准备: 将接口 sleep 若干秒时间, 开始压测\n\n压测工具: [wrk](https://github.com/wg/wrk)\n\n###### 先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题\n\n使用压测工具10个线程并发, 持续5秒请求\n\n```shell\n$ wrk -s post.lua -t 10 -c 10 -d 5s --latency http://service.test/credit/user_credit\nRunning 5s test @ http://service.test/credit/user_credit\n  10 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     0.00us    0.00us   0.00us    -nan%\n    Req/Sec     0.00      0.00     0.00    100.00%\n  Latency Distribution\n     50%    0.00us\n     75%    0.00us\n     90%    0.00us\n     99%    0.00us\n  2 requests in 5.01s, 1.70KB read\n  Socket errors: connect 0, read 0, write 0, timeout 2\nRequests/sec:      0.40\nTransfer/sec:     346.72B\n```\n\nnginx访问请求日志可以看出, 访问成功的只有2条, 剩下的均为499主动断开连接\n\n```\n112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] \"POST /credit/user_credit HTTP/1.1\" 3.003 3.003 200 682 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] \"POST /credit/user_credit HTTP/1.1\" 3.004 3.004 200 682 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.007 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.008 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.009 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] \"POST /credit/user_credit HTTP/1.1\" 5.010 - 499 0 \"-\" \"-\" -{\\x22user_id\\x22:450119}\n```\n\nphp请求日志中, 接收到4条请求日志:\n\n```\n[2018-08-16 19:32:07.232160] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:07.233247] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.233018] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - <===/credit/user_credit cost: 3001 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.233913] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.234961] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - <===/credit/user_credit cost: 3002 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:10.235735] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===>/credit/user_credit ip: [112.126.95.181]; params: {\"user_id\":450119} {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:13.236693] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - <===/credit/user_credit cost: 3003 ms {\"qd_type\":\"sys\"}\n[2018-08-16 19:32:13.237531] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - <===/credit/user_credit cost: 3002 ms {\"qd_type\":\"sys\"}\n```\n\n调整压测持续时间为1分钟, 观察系统负载, 发现系统毫无压力, 与线上现象匹配\n\n###### worker_num 调整到 100\n\n再次压测发现, 并发量已经上来了, 就不放示例了, 大家可以自行测试一下\n\n#### 总结\n\n在测试环境进行压测不仅要测试接口正常的性能, 还应该模拟响应耗时比长的场景对服务的影响, 然后想办法最大化利用系统资源提高并发量\n","slug":"laravel-s-499-错误解决","published":1,"updated":"2018-08-17T01:59:47.017Z","_id":"cjkxchqf40001ndzxvdnyfz9t","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>线上 lumen 服务优化为 swoole 后, 性能得到显著提升, 但伴随而来一些奇怪的问题, 需要排查</p>\n</blockquote>\n<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题:\"></a>问题:</h4><p>线上服务偶现 499 错误, 且问题期间伴随着少许 redis 或数据库连接超时</p>\n<h4 id=\"分析现场\"><a href=\"#分析现场\" class=\"headerlink\" title=\"分析现场:\"></a>分析现场:</h4><ul>\n<li>通过 zabbix 观察报错期间, cpu load 和内存使用未发现异常, 且 cpu 使用率和内存使用率偏低</li>\n<li>线上日志, 通过全链路 TraceID 分析, 在 499 发生的期间, nginx 有 access 日志, 但业务代码并未发现任何日志</li>\n</ul>\n<h4 id=\"分析问题\"><a href=\"#分析问题\" class=\"headerlink\" title=\"分析问题:\"></a>分析问题:</h4><p><a href=\"https://github.com/hhxsv5/laravel-s\" target=\"_blank\" rel=\"noopener\">laravel-s</a> 默认设置的默认工作进程数(worker_num)为 cpu 核心数 <em> 2. 从官方文档查询 <a href=\"https://wiki.swoole.com/wiki/page/275.html\" target=\"_blank\" rel=\"noopener\">worker_num 的定义</a>: “业务代码为同步阻塞，需要根据请求响应时间和系统负载来调整; 最大不得超过SWOOLE_CPU_NUM </em> 1000”. 推断是因为流量较高的情况下, 如果出现网络闪断/DB或redis超时, 正在处理的请求会产生积压, 没有足够的 worker 进程处理, 请求就会积压在 nginx, 直到网络调用方”不耐烦”主动断开连接, nginx 出现 499. 此时内存和 cpu 没有充分利用, 造成资源浪费</p>\n<h4 id=\"通过压测验证\"><a href=\"#通过压测验证\" class=\"headerlink\" title=\"通过压测验证:\"></a>通过压测验证:</h4><p>测试环境: 4c 8g</p>\n<p>测试准备: 将接口 sleep 若干秒时间, 开始压测</p>\n<p>压测工具: <a href=\"https://github.com/wg/wrk\" target=\"_blank\" rel=\"noopener\">wrk</a></p>\n<h6 id=\"先将接口-sleep-3-秒-worker-num-调整到-2-重启-swoole-模拟进程资源紧缺时请求等待-复现-499-问题\"><a href=\"#先将接口-sleep-3-秒-worker-num-调整到-2-重启-swoole-模拟进程资源紧缺时请求等待-复现-499-问题\" class=\"headerlink\" title=\"先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题\"></a>先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题</h6><p>使用压测工具10个线程并发, 持续5秒请求</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> wrk -s post.lua -t 10 -c 10 -d 5s --latency http://service.test/credit/user_credit</span><br><span class=\"line\">Running 5s test @ http://service.test/credit/user_credit</span><br><span class=\"line\">  10 threads and 10 connections</span><br><span class=\"line\">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class=\"line\">    Latency     0.00us    0.00us   0.00us    -nan%</span><br><span class=\"line\">    Req/Sec     0.00      0.00     0.00    100.00%</span><br><span class=\"line\">  Latency Distribution</span><br><span class=\"line\">     50%    0.00us</span><br><span class=\"line\">     75%    0.00us</span><br><span class=\"line\">     90%    0.00us</span><br><span class=\"line\">     99%    0.00us</span><br><span class=\"line\">  2 requests in 5.01s, 1.70KB read</span><br><span class=\"line\">  Socket errors: connect 0, read 0, write 0, timeout 2</span><br><span class=\"line\">Requests/sec:      0.40</span><br><span class=\"line\">Transfer/sec:     346.72B</span><br></pre></td></tr></table></figure>\n<p>nginx访问请求日志可以看出, 访问成功的只有2条, 剩下的均为499主动断开连接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 3.003 3.003 200 682 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 3.004 3.004 200 682 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.007 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.008 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.009 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.010 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br></pre></td></tr></table></figure>\n<p>php请求日志中, 接收到4条请求日志:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[2018-08-16 19:32:07.232160] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:07.233247] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.233018] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - &lt;===/credit/user_credit cost: 3001 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.233913] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.234961] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - &lt;===/credit/user_credit cost: 3002 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.235735] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:13.236693] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - &lt;===/credit/user_credit cost: 3003 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:13.237531] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - &lt;===/credit/user_credit cost: 3002 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p>调整压测持续时间为1分钟, 观察系统负载, 发现系统毫无压力, 与线上现象匹配</p>\n<h6 id=\"worker-num-调整到-100\"><a href=\"#worker-num-调整到-100\" class=\"headerlink\" title=\"worker_num 调整到 100\"></a>worker_num 调整到 100</h6><p>再次压测发现, 并发量已经上来了, 就不放示例了, 大家可以自行测试一下</p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>在测试环境进行压测不仅要测试接口正常的性能, 还应该模拟响应耗时比长的场景对服务的影响, 然后想办法最大化利用系统资源提高并发量</p>\n","site":{"data":{"melody":{"language":"zh-Hans","menu":{"Home":"/","Archives":"/archives"},"favicon":"/favicon.ico","pwa":{"enable":false,"manifest":null},"highlight_theme":"light","social":{"github":"https://github.com/pauldo"},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"}},"mathjax":{"enable":false,"cdn":"https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"fireworks":true,"baidu_analytics":null,"google_analytics":null,"stylesheets":["/css/index.css"],"scripts":["/js/utils.js","/js/fancybox.js","/js/sidebar.js","/js/copy.js","/js/fireworks.js","/js/transition.js","/js/scroll.js","/js/head.js"],"cdn":{"css":{"fontawesome":"https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"},"js":{"anime":"/js/third-party/anime.min.js","jquery":"/js/third-party/jquery.min.js","fancybox":"/js/third-party/jquery.fancybox.min.js","velocity":"/js/third-party/velocity.min.js","velocity-ui":"/js/third-party/velocity.ui.min.js"}},"avatar":null,"top_img":"img/home-bg.jpg","post_meta":{"date_type":"created","categories":true,"tags":true},"wordcount":{"enable":false},"toc":{"enable":true},"post_copyright":{"enable":true,"license":"CC BY-NC-SA 4.0","license_url":"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"slide":{"separator":"---","separator_vertical":"--","charset":"utf-8","theme":"black","mouseWheel":true,"transition":"slide","transitionSpeed":"default","parallaxBackgroundImage":"","parallaxBackgroundSize":"","parallaxBackgroundHorizontal":null,"parallaxBackgroundVertical":null},"addThis":{"enable":false},"disqus":{"enable":false},"since":2018,"ICP":{"enable":false},"busuanzi":{"enable":true,"site_uv":true,"site_uv_header":"<i class=\"fa fa-user\"></i>","site_uv_footer":null,"site_pv":true,"site_pv_header":"<i class=\"fa fa-eye\"></i>","site_pv_footer":null,"page_pv":true,"page_pv_header":"<i class=\"fa fa-file-o\"></i>","page_pv_footer":null}}}},"excerpt":"","more":"<blockquote>\n<p>线上 lumen 服务优化为 swoole 后, 性能得到显著提升, 但伴随而来一些奇怪的问题, 需要排查</p>\n</blockquote>\n<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题:\"></a>问题:</h4><p>线上服务偶现 499 错误, 且问题期间伴随着少许 redis 或数据库连接超时</p>\n<h4 id=\"分析现场\"><a href=\"#分析现场\" class=\"headerlink\" title=\"分析现场:\"></a>分析现场:</h4><ul>\n<li>通过 zabbix 观察报错期间, cpu load 和内存使用未发现异常, 且 cpu 使用率和内存使用率偏低</li>\n<li>线上日志, 通过全链路 TraceID 分析, 在 499 发生的期间, nginx 有 access 日志, 但业务代码并未发现任何日志</li>\n</ul>\n<h4 id=\"分析问题\"><a href=\"#分析问题\" class=\"headerlink\" title=\"分析问题:\"></a>分析问题:</h4><p><a href=\"https://github.com/hhxsv5/laravel-s\" target=\"_blank\" rel=\"noopener\">laravel-s</a> 默认设置的默认工作进程数(worker_num)为 cpu 核心数 <em> 2. 从官方文档查询 <a href=\"https://wiki.swoole.com/wiki/page/275.html\" target=\"_blank\" rel=\"noopener\">worker_num 的定义</a>: “业务代码为同步阻塞，需要根据请求响应时间和系统负载来调整; 最大不得超过SWOOLE_CPU_NUM </em> 1000”. 推断是因为流量较高的情况下, 如果出现网络闪断/DB或redis超时, 正在处理的请求会产生积压, 没有足够的 worker 进程处理, 请求就会积压在 nginx, 直到网络调用方”不耐烦”主动断开连接, nginx 出现 499. 此时内存和 cpu 没有充分利用, 造成资源浪费</p>\n<h4 id=\"通过压测验证\"><a href=\"#通过压测验证\" class=\"headerlink\" title=\"通过压测验证:\"></a>通过压测验证:</h4><p>测试环境: 4c 8g</p>\n<p>测试准备: 将接口 sleep 若干秒时间, 开始压测</p>\n<p>压测工具: <a href=\"https://github.com/wg/wrk\" target=\"_blank\" rel=\"noopener\">wrk</a></p>\n<h6 id=\"先将接口-sleep-3-秒-worker-num-调整到-2-重启-swoole-模拟进程资源紧缺时请求等待-复现-499-问题\"><a href=\"#先将接口-sleep-3-秒-worker-num-调整到-2-重启-swoole-模拟进程资源紧缺时请求等待-复现-499-问题\" class=\"headerlink\" title=\"先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题\"></a>先将接口 sleep 3 秒, worker_num 调整到 2, 重启 swoole, 模拟进程资源紧缺时请求等待, 复现 499 问题</h6><p>使用压测工具10个线程并发, 持续5秒请求</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span> wrk -s post.lua -t 10 -c 10 -d 5s --latency http://service.test/credit/user_credit</span><br><span class=\"line\">Running 5s test @ http://service.test/credit/user_credit</span><br><span class=\"line\">  10 threads and 10 connections</span><br><span class=\"line\">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class=\"line\">    Latency     0.00us    0.00us   0.00us    -nan%</span><br><span class=\"line\">    Req/Sec     0.00      0.00     0.00    100.00%</span><br><span class=\"line\">  Latency Distribution</span><br><span class=\"line\">     50%    0.00us</span><br><span class=\"line\">     75%    0.00us</span><br><span class=\"line\">     90%    0.00us</span><br><span class=\"line\">     99%    0.00us</span><br><span class=\"line\">  2 requests in 5.01s, 1.70KB read</span><br><span class=\"line\">  Socket errors: connect 0, read 0, write 0, timeout 2</span><br><span class=\"line\">Requests/sec:      0.40</span><br><span class=\"line\">Transfer/sec:     346.72B</span><br></pre></td></tr></table></figure>\n<p>nginx访问请求日志可以看出, 访问成功的只有2条, 剩下的均为499主动断开连接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 3.003 3.003 200 682 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:10 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 3.004 3.004 200 682 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.007 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.008 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.009 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br><span class=\"line\">112.126.95.181 - - [16/Aug/2018:19:32:12 +0800] &quot;POST /credit/user_credit HTTP/1.1&quot; 5.010 - 499 0 &quot;-&quot; &quot;-&quot; -&#123;\\x22user_id\\x22:450119&#125;</span><br></pre></td></tr></table></figure>\n<p>php请求日志中, 接收到4条请求日志:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[2018-08-16 19:32:07.232160] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:07.233247] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.233018] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - &lt;===/credit/user_credit cost: 3001 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.233913] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.234961] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - &lt;===/credit/user_credit cost: 3002 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:10.235735] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - ===&gt;/credit/user_credit ip: [112.126.95.181]; params: &#123;&quot;user_id&quot;:450119&#125; &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:13.236693] INFO F0C45E8A-541B-EA05-AA8E-A2446761DDAE - - - F0C45E8A-541B-EA05-AA8E-A2446761DDAE - [] - - - &lt;===/credit/user_credit cost: 3003 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br><span class=\"line\">[2018-08-16 19:32:13.237531] INFO A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - - - A9EC701C-C2FC-829C-52F3-8B93EB2548F5 - [] - - - &lt;===/credit/user_credit cost: 3002 ms &#123;&quot;qd_type&quot;:&quot;sys&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p>调整压测持续时间为1分钟, 观察系统负载, 发现系统毫无压力, 与线上现象匹配</p>\n<h6 id=\"worker-num-调整到-100\"><a href=\"#worker-num-调整到-100\" class=\"headerlink\" title=\"worker_num 调整到 100\"></a>worker_num 调整到 100</h6><p>再次压测发现, 并发量已经上来了, 就不放示例了, 大家可以自行测试一下</p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>在测试环境进行压测不仅要测试接口正常的性能, 还应该模拟响应耗时比长的场景对服务的影响, 然后想办法最大化利用系统资源提高并发量</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}